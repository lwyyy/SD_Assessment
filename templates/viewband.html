<!DOCTYPE html>
<html>
<head>
    <title>View others' band</title>
    <style>
        table, th, td {
            border: 1px solid black;
            text-align: left;
        }
    </style>
    <script type="text/javascript">
        var total = {{ band['Treasury'] }};
        {% if 'Ensign' in band.keys() %}
            var engHire = true;
            var hadEnsign = true;
        {%else%}
            var engHire = false;
            var hadEnsign = false;
        {% endif %}

        function setCapSkillchoice(x) {
            var choice = x.value;
            var myTable = document.getElementById('wizardTable');
            var list = myTable.rows[1].cells[8];
            while (list.hasChildNodes()) {
                list.removeChild(list.firstChild);
            }
            if (choice == "Empty") {
                list.appendChild(document.createTextNode("No Skills"));
            }
            {% for spec in skills.keys() %}
                if (choice == "{{spec}}") {
                    var div = document.createElement("div");
                    {% for element in skills[spec] %}
                        var tempbutton = document.createElement("input");
                        tempbutton.setAttribute("type", "radio");
                        tempbutton.setAttribute("id", "skillchoice");
                        tempbutton.setAttribute("name", "skillchoice");
                        tempbutton.setAttribute("value", "{{element}}");
                        var templabel = document.createElement("label");
                        templabel.appendChild(document.createTextNode("{{element}}"));
                        div.appendChild(tempbutton);
                        div.appendChild(templabel);
                    {% endfor %}
                    list.appendChild(div);
                }
            {% endfor %}
        }

        function setEnsSkillchoice(x) {
            var choice = x.value;
            var myTable = document.getElementById('ensignTable');
            var list = myTable.rows[1].cells[8];
            while (list.hasChildNodes()) {
                list.removeChild(list.firstChild);
            }
            if (choice == "Empty") {
                list.appendChild(document.createTextNode("No Skills"));
            }
            {% for spec in skills.keys() %}
                if (choice == "{{spec}}") {
                    var div = document.createElement("div");
                    {% for element in skills[spec] %}
                        var tempbutton = document.createElement("input");
                        tempbutton.setAttribute("type", "radio");
                        tempbutton.setAttribute("id", "skillchoiceens");
                        tempbutton.setAttribute("name", "skillchoiceens");
                        tempbutton.setAttribute("value", "{{element}}");
                        var templabel = document.createElement("label");
                        templabel.appendChild(document.createTextNode("{{element}}"));
                        div.appendChild(tempbutton);
                        div.appendChild(templabel);
                    {% endfor %}
                    list.appendChild(div);
                }
            {% endfor %}
        }

    </script>
</head>
<body>

<h1>{{ owner }}'s Warband</h1>
<h2>Warband Name: {{ band['Name'] }}</h2>

<table border="0">
    <tr>
        <td><h3>Currency remaining: </h3></td>
        <td id='remainingGold'>{{ band['Treasury'] }}</td>
    </tr>
</table>
<br/>
<table id="wizardTable">
    <tr>
        <td>Move</td>
        <td>Fight</td>
        <td>Shoot</td>
        <td>Shield</td>
        <td>Morale</td>
        <td>Health</td>
        <td>Specialism</td>
        <td>Weapons and Equipment</td>
        <td>Skills</td>
        <td>Experience</td>
    </tr>
    <tr>
        <td>{{ band['Captain']['Move'] }}</td>
        <td>{{ band['Captain']['Fight'] }}</td>
        <td>{{ band['Captain']['Shoot'] }}</td>
        <td>{{ band['Captain']['Shield'] }}</td>
        <td>{{ band['Captain']['Morale'] }}</td>
        <td>{{ band['Captain']['Health'] }}</td>
        <td>{{ band['Captain']['Specialism'] }}</td>
        <td>
            <select id="capweapsel">
                {% for weap in weaps %}
                    {% if weap in band['Captain']['Items'] %}
                        <option value="{{ weap }}">{{ weap }}</option>
                    {% endif %}
                {% endfor %}
            </select></td>
        <td>
            {% for opt in skills[band['Captain']['Specialism']] %}
                {% if opt in band['Captain']['Skillset'] %}
                    <input type="checkbox" name="capskil" value="{{ opt }}" checked disabled>{{ opt }}
                {% else %}
                    <input type="checkbox" name="capskil" value="{{ opt }}" disabled>{{ opt }}
                {% endif %}
            {% endfor %}
        </td>
        <td>{{ band['Captain']['Experience'] }}</td>
    </tr>

</table>
<br/>
Hire apprentice? <input type="checkbox" name="appHire" {% if 'Ensign' in band.keys() %}
                        checked {% endif %} disabled>250gc<br>
{% if 'Ensign' in band.keys() %}
    <table id="ensignTable">
        <tr>
            <td>Move</td>
            <td>Fight</td>
            <td>Shoot</td>
            <td>Shield</td>
            <td>Morale</td>
            <td>Health</td>
            <td>Specialism</td>
            <td>Weapons and Equipment</td>
            <td>Skills</td>
            <td>Experience</td>
        </tr>
        {% if 'Ensign' in band.keys() %}
            <tr>
                <td>{{ band['Ensign']['Move'] }}</td>
                <td>{{ band['Ensign']['Fight'] }}</td>
                <td>{{ band['Ensign']['Shoot'] }}</td>
                <td>{{ band['Ensign']['Shield'] }}</td>
                <td>{{ band['Ensign']['Morale'] }}</td>
                <td>{{ band['Ensign']['Health'] }}</td>
                <td>{{ band['Ensign']['Specialism'] }}</td>
                <td>
                    <select id="ensweapsel">
                        {% for weap in weaps %}
                            {% if weap in band['Ensign']['Items'] %}
                                <option value="{{ weap }}">{{ weap }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </td>
                <td>
                    {% for opt in skills[band['Ensign']['Specialism']] %}
                        {% if opt in band['Ensign']['Skillset'] %}
                            <input type="checkbox" name="ensskil" value="{{ opt }}" checked disabled>{{ opt }}
                        {% else %}
                            <input type="checkbox" name="ensskil" value="{{ opt }}" disabled>{{ opt }}
                        {% endif %}
                    {% endfor %}
                </td>
                <td>{{ band['Ensign']['Experience'] }}</td>
            </tr>
        {% endif %}
    </table>
{% endif %}
<br/>
<table id='rosterTable'>
    <tr>
        <td>Class</td>
        <td>Move</td>
        <td>Fight</td>
        <td>Shoot</td>
        <td>Shield</td>
        <td>Morale</td>
        <td>Health</td>
        <td>Cost</td>
        <td>Notes</td>
    </tr>

    {% for trooper in band['Troops'] %}
        <tr>
            <td>{{ trooper }}</td>
            <td>{{ people[trooper]['Move'] }}</td>
            <td>{{ people[trooper]['Fight'] }}</td>
            <td>{{ people[trooper]['Shoot'] }}</td>
            <td>{{ people[trooper]['Shield'] }}</td>
            <td>{{ people[trooper]['Morale'] }}</td>
            <td>{{ people[trooper]['Health'] }}</td>
            <td>{{ people[trooper]['Cost'] }}</td>
            <td>{{ people[trooper]['Notes'] }}</td>
        </tr>
    {% endfor %}
</table>
<br/>
<button onclick="window.location.href='/view'">Back</button>
</body>
</html>

